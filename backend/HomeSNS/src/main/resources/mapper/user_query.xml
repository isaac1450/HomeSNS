<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="com.ssafy.homesns.dao.UserDao">


	<insert id="userRegister" parameterType="com.ssafy.homesns.dto.UserDto">
		insert into user (  user_id,     user_password,     user_email,     user_name,     user_nickname,     user_phone,     user_bod,     user_profile_image_url,   user_register_date,   user_cls,     refresh_token   ) 
		          values (  #{userId},   #{userPassword},   #{userEmail},   #{userName},   #{userNickname},   #{userPhone},   #{userBod},   #{userProfileImageUrl},   now(),                #{userCls},   #{refreshToken} )
	</insert>

	<update id="userUpdate" parameterType="com.ssafy.homesns.dto.UserDto">
		UPDATE user SET USER_PASSWORD = #{userPassword}, USER_NAME = #{userName}, USER_NICKNAME = #{userNickname}, USER_BOD = #{userBod}, USER_PROFILE_IMAGE_URL = #{userProfileImageUrl}, REFRESH_TOKEN = #{refreshToken}  
		 WHERE USER_SEQ = #{userSeq}
	</update>

	<delete id="userDelete" parameterType="int">
		DELETE FROM user WHERE USER_SEQ = #{userSeq}
	</delete>
	
	<select id="userExist" parameterType="string" resultType="com.ssafy.homesns.dto.UserDto">
		SELECT USER_SEQ as userSeq, USER_ID as userId, USER_PASSWORD as userPassword, USER_EMAIL as userEmail, 
			   USER_NAME as userName, USER_NICKNAME as userNickname, USER_PHONE as userPhone, USER_BOD as userBod, 
			   USER_PROFILE_IMAGE_URL as userProfileImageUrl,USER_REGISTER_DATE as userRegisterDate, USER_CLS as userCls
		  FROM USER 
		 WHERE USER_PHONE = #{userPhone}
	</select>
	
	<select id="checkUserId" parameterType="string" resultType="int">
		SELECT COUNT(*)
		  FROM USER 
		 WHERE USER_ID = #{userId}
	</select>
	
	<select id="checkUserEmail" parameterType="string" resultType="int">
		SELECT COUNT(*)
		  FROM USER 
		 WHERE USER_EMAIL = #{userEmail}
	</select>

	<select id="checkUserPhone" parameterType="string" resultType="int">
		SELECT COUNT(*)
		  FROM USER 
		 WHERE USER_Phone = #{userPhone}
	</select>

</mapper>
